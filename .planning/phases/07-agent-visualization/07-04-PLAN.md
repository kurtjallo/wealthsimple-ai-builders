---
phase: 07-agent-visualization
plan: 04
type: execute
wave: 3
depends_on: ["07-02"]
files_modified:
  - src/app/globals.css
  - src/components/layout/dashboard-header.tsx
  - src/components/layout/dashboard-sidebar.tsx
  - src/components/layout/dashboard-shell.tsx
  - src/components/ui/loading-skeleton.tsx
  - src/components/ui/status-dot.tsx
  - src/app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard has a professional header with app name, branding, and navigation"
    - "Dashboard has a sidebar with navigation links and system status indicators"
    - "Dashboard shell layout wraps all pages with header + sidebar + content area"
    - "Color scheme is consistent: slate for neutral, emerald for success, blue for active, red for error, amber for warning"
    - "Typography is clean with proper hierarchy: Inter font, consistent heading sizes, appropriate line heights"
    - "Loading states use skeleton placeholders instead of spinners or blank screens"
    - "Overall aesthetic is professional compliance software, not a prototype"
  artifacts:
    - path: "src/components/layout/dashboard-header.tsx"
      provides: "Top navigation bar with app branding, case count badge, and system status"
      exports: ["DashboardHeader"]
    - path: "src/components/layout/dashboard-sidebar.tsx"
      provides: "Left sidebar with navigation links and agent system health"
      exports: ["DashboardSidebar"]
    - path: "src/components/layout/dashboard-shell.tsx"
      provides: "Layout wrapper composing header + sidebar + content area"
      exports: ["DashboardShell"]
    - path: "src/components/ui/loading-skeleton.tsx"
      provides: "Skeleton loader components for cards, tables, and text blocks"
      exports: ["CardSkeleton", "TableRowSkeleton", "TextBlockSkeleton"]
    - path: "src/components/ui/status-dot.tsx"
      provides: "Small animated status indicator dot"
      exports: ["StatusDot"]
  key_links:
    - from: "src/components/layout/dashboard-shell.tsx"
      to: "src/components/layout/dashboard-header.tsx"
      via: "composes header into layout"
      pattern: "import.*DashboardHeader"
    - from: "src/components/layout/dashboard-shell.tsx"
      to: "src/components/layout/dashboard-sidebar.tsx"
      via: "composes sidebar into layout"
      pattern: "import.*DashboardSidebar"
    - from: "src/app/layout.tsx"
      to: "src/components/layout/dashboard-shell.tsx"
      via: "wraps children in dashboard shell"
      pattern: "import.*DashboardShell"
---

<objective>
Polish the dashboard UI to professional compliance-platform quality — consistent color scheme, clean typography, dashboard shell layout (header + sidebar + content), loading skeletons, and micro-UI components. Make every pixel look like real software, not a prototype.

Purpose: The dashboard IS the demo. When WS reviewers watch the 2-3 minute demo video, the UI quality signals "this person builds production software." A polished dashboard with proper layout, consistent colors, and loading states separates this from every other hackathon-quality submission. This plan handles the overall chrome — the pipeline visualization (Plan 02/03) sits inside this shell.

Output: Complete dashboard layout shell with header, sidebar, loading skeletons, status indicators, and refined global styles.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-agent-visualization/07-02-SUMMARY.md
@src/app/layout.tsx
@src/app/globals.css
@src/components/ui/badge.tsx (Badge)
@src/components/ui/button.tsx (Button)
@src/components/ui/separator.tsx (Separator)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dashboard layout shell with header and sidebar</name>
  <files>
    src/components/layout/dashboard-header.tsx,
    src/components/layout/dashboard-sidebar.tsx,
    src/components/layout/dashboard-shell.tsx,
    src/app/layout.tsx
  </files>
  <action>
    1. Create `src/components/layout/dashboard-header.tsx` — professional top navigation bar:

       ```typescript
       'use client';

       import { Badge } from '@/components/ui/badge';
       import { StatusDot } from '@/components/ui/status-dot';
       import { Shield, Bell } from 'lucide-react';

       interface DashboardHeaderProps {
         systemStatus?: 'online' | 'degraded' | 'offline';
       }

       export function DashboardHeader({ systemStatus = 'online' }: DashboardHeaderProps) {
         return (
           <header className="sticky top-0 z-50 flex h-14 items-center border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 px-6">
             {/* Left: Logo and app name */}
             <div className="flex items-center gap-3">
               <div className="flex h-8 w-8 items-center justify-center rounded-lg bg-slate-900">
                 <Shield className="h-4 w-4 text-white" />
               </div>
               <div className="flex items-center gap-2">
                 <h1 className="text-sm font-semibold tracking-tight text-slate-900">
                   KYC/AML Operations
                 </h1>
                 <Badge variant="outline" className="text-[10px] px-1.5 py-0 h-4 font-normal text-slate-500 border-slate-200">
                   v1.0
                 </Badge>
               </div>
             </div>

             {/* Right: System status and actions */}
             <div className="ml-auto flex items-center gap-4">
               {/* System status indicator */}
               <div className="flex items-center gap-2 text-xs text-muted-foreground">
                 <StatusDot
                   status={systemStatus}
                   size="sm"
                 />
                 <span className="hidden sm:inline">
                   {systemStatus === 'online' && 'System Online'}
                   {systemStatus === 'degraded' && 'Degraded'}
                   {systemStatus === 'offline' && 'Offline'}
                 </span>
               </div>

               {/* Notification bell (visual only for demo) */}
               <button className="relative flex h-8 w-8 items-center justify-center rounded-md hover:bg-slate-100 transition-colors">
                 <Bell className="h-4 w-4 text-slate-500" />
               </button>

               {/* User avatar placeholder */}
               <div className="flex h-8 w-8 items-center justify-center rounded-full bg-slate-200 text-xs font-medium text-slate-600">
                 CO
               </div>
             </div>
           </header>
         );
       }
       ```

    2. Create `src/components/layout/dashboard-sidebar.tsx` — left navigation sidebar:

       ```typescript
       'use client';

       import { usePathname } from 'next/navigation';
       import Link from 'next/link';
       import { cn } from '@/lib/utils';
       import { Separator } from '@/components/ui/separator';
       import { StatusDot } from '@/components/ui/status-dot';
       import {
         LayoutDashboard,
         FileStack,
         Users,
         ShieldCheck,
         BarChart3,
         FileText,
         Settings,
         Activity,
       } from 'lucide-react';

       const NAV_ITEMS = [
         {
           label: 'Dashboard',
           href: '/dashboard',
           icon: LayoutDashboard,
         },
         {
           label: 'Case Queue',
           href: '/dashboard/cases',
           icon: FileStack,
         },
         {
           label: 'Processing',
           href: '/dashboard/processing',
           icon: Activity,
         },
         {
           label: 'Audit Trail',
           href: '/dashboard/audit',
           icon: FileText,
         },
       ];

       // Agent system health indicators
       const AGENT_SYSTEMS = [
         { name: 'Document OCR', status: 'online' as const },
         { name: 'Identity Verification', status: 'online' as const },
         { name: 'Sanctions Screening', status: 'online' as const },
         { name: 'Risk Scoring', status: 'online' as const },
         { name: 'Case Narrator', status: 'online' as const },
       ];

       export function DashboardSidebar() {
         const pathname = usePathname();

         return (
           <aside className="fixed left-0 top-14 z-40 flex h-[calc(100vh-3.5rem)] w-56 flex-col border-r bg-slate-50/50">
             {/* Navigation links */}
             <nav className="flex-1 space-y-1 px-3 py-4">
               {NAV_ITEMS.map((item) => {
                 const isActive = pathname === item.href || pathname?.startsWith(item.href + '/');
                 const Icon = item.icon;

                 return (
                   <Link
                     key={item.href}
                     href={item.href}
                     className={cn(
                       'flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors',
                       isActive
                         ? 'bg-slate-900 text-white font-medium'
                         : 'text-slate-600 hover:bg-slate-100 hover:text-slate-900',
                     )}
                   >
                     <Icon className="h-4 w-4 flex-shrink-0" />
                     {item.label}
                   </Link>
                 );
               })}
             </nav>

             <Separator />

             {/* Agent system health */}
             <div className="px-3 py-4">
               <h3 className="mb-3 px-3 text-[10px] font-semibold uppercase tracking-wider text-slate-400">
                 Agent Systems
               </h3>
               <div className="space-y-2">
                 {AGENT_SYSTEMS.map((system) => (
                   <div
                     key={system.name}
                     className="flex items-center gap-2 px-3 py-1"
                   >
                     <StatusDot status={system.status} size="xs" />
                     <span className="text-xs text-slate-500">{system.name}</span>
                   </div>
                 ))}
               </div>
             </div>

             {/* Footer */}
             <div className="border-t px-3 py-3">
               <Link
                 href="/dashboard/settings"
                 className="flex items-center gap-3 rounded-lg px-3 py-2 text-sm text-slate-500 hover:bg-slate-100 hover:text-slate-900 transition-colors"
               >
                 <Settings className="h-4 w-4" />
                 Settings
               </Link>
             </div>
           </aside>
         );
       }
       ```

    3. Create `src/components/layout/dashboard-shell.tsx` — layout wrapper:

       ```typescript
       'use client';

       import { DashboardHeader } from './dashboard-header';
       import { DashboardSidebar } from './dashboard-sidebar';

       interface DashboardShellProps {
         children: React.ReactNode;
       }

       export function DashboardShell({ children }: DashboardShellProps) {
         return (
           <div className="min-h-screen bg-slate-50">
             <DashboardHeader />
             <DashboardSidebar />
             <main className="ml-56 pt-14">
               <div className="p-6">
                 {children}
               </div>
             </main>
           </div>
         );
       }
       ```

    4. Update `src/app/layout.tsx` — READ first, then integrate the dashboard shell.

       The root layout should conditionally wrap dashboard routes in the shell. Since this is a single-page compliance app (not a marketing site), the simplest approach is to wrap all children in the DashboardShell. If the landing page needs a different layout, use route groups later.

       Update the body content to:
       ```typescript
       import { DashboardShell } from '@/components/layout/dashboard-shell';

       // In the body:
       <body className={cn(inter.className, "min-h-screen bg-slate-50 antialiased")}>
         <DashboardShell>
           {children}
         </DashboardShell>
       </body>
       ```

       IMPORTANT: If the root layout already has a different structure (e.g., Phase 6 added a layout), READ the current file and merge carefully. The DashboardShell should be the outermost layout wrapper inside the body.

       ALTERNATIVE: If using Next.js route groups, create `src/app/(dashboard)/layout.tsx` instead and move dashboard-specific pages there. This keeps the root layout clean. The executor should check what Phase 6 has done and choose the appropriate pattern.
  </action>
  <verify>
    - `npx tsc --noEmit` passes for all layout files
    - DashboardHeader renders with logo, app name, version badge, system status, and user avatar
    - DashboardSidebar renders with 4 navigation links and 5 agent system health indicators
    - DashboardShell composes header + sidebar + content area with proper spacing
    - Main content area has `ml-56` (offset for 14rem sidebar) and `pt-14` (offset for 3.5rem header)
    - `npm run dev` shows the dashboard shell at localhost:3000
    - Navigation links use Next.js Link component with active state highlighting
    - Sidebar agent systems all show green status dots
  </verify>
  <done>
    Complete dashboard layout shell built: sticky header with branding and system status, fixed sidebar with navigation and agent health indicators, properly offset main content area. Professional compliance software aesthetic.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create UI polish components and refine global styles</name>
  <files>
    src/components/ui/status-dot.tsx,
    src/components/ui/loading-skeleton.tsx,
    src/app/globals.css
  </files>
  <action>
    1. Create `src/components/ui/status-dot.tsx` — animated status indicator:

       ```typescript
       'use client';

       import { cn } from '@/lib/utils';

       interface StatusDotProps {
         status: 'online' | 'degraded' | 'offline' | 'pending' | 'running' | 'completed' | 'failed';
         size?: 'xs' | 'sm' | 'md';
         className?: string;
         pulse?: boolean;
       }

       const SIZE_MAP = {
         xs: 'h-1.5 w-1.5',
         sm: 'h-2 w-2',
         md: 'h-2.5 w-2.5',
       };

       const COLOR_MAP: Record<string, string> = {
         online: 'bg-emerald-500',
         completed: 'bg-emerald-500',
         degraded: 'bg-amber-500',
         running: 'bg-blue-500',
         pending: 'bg-slate-400',
         offline: 'bg-red-500',
         failed: 'bg-red-500',
       };

       const PULSE_COLOR_MAP: Record<string, string> = {
         online: 'bg-emerald-400',
         completed: 'bg-emerald-400',
         degraded: 'bg-amber-400',
         running: 'bg-blue-400',
         pending: 'bg-slate-300',
         offline: 'bg-red-400',
         failed: 'bg-red-400',
       };

       export function StatusDot({
         status,
         size = 'sm',
         className,
         pulse,
       }: StatusDotProps) {
         // Auto-pulse for running and online status
         const shouldPulse = pulse ?? (status === 'running' || status === 'online');

         return (
           <span className={cn('relative inline-flex', className)}>
             {shouldPulse && (
               <span
                 className={cn(
                   'absolute inline-flex h-full w-full animate-ping rounded-full opacity-75',
                   PULSE_COLOR_MAP[status] || 'bg-slate-300',
                 )}
               />
             )}
             <span
               className={cn(
                 'relative inline-flex rounded-full',
                 SIZE_MAP[size],
                 COLOR_MAP[status] || 'bg-slate-400',
               )}
             />
           </span>
         );
       }
       ```

    2. Create `src/components/ui/loading-skeleton.tsx` — skeleton loader components:

       ```typescript
       'use client';

       import { cn } from '@/lib/utils';

       interface SkeletonProps {
         className?: string;
       }

       function Skeleton({ className }: SkeletonProps) {
         return (
           <div
             className={cn(
               'animate-pulse rounded-md bg-slate-200',
               className,
             )}
           />
         );
       }

       export function CardSkeleton({ className }: SkeletonProps) {
         return (
           <div className={cn('rounded-lg border bg-white p-4 space-y-3', className)}>
             <div className="flex items-center gap-3">
               <Skeleton className="h-8 w-8 rounded-lg" />
               <div className="space-y-1.5 flex-1">
                 <Skeleton className="h-4 w-32" />
                 <Skeleton className="h-3 w-48" />
               </div>
               <Skeleton className="h-5 w-16 rounded-full" />
             </div>
             <Skeleton className="h-3 w-24" />
           </div>
         );
       }

       export function TableRowSkeleton({ className }: SkeletonProps) {
         return (
           <div className={cn('flex items-center gap-4 px-4 py-3 border-b', className)}>
             <Skeleton className="h-4 w-4 rounded" />
             <Skeleton className="h-4 w-32" />
             <Skeleton className="h-4 w-24" />
             <Skeleton className="h-5 w-16 rounded-full" />
             <Skeleton className="h-4 w-20 ml-auto" />
           </div>
         );
       }

       export function TextBlockSkeleton({
         lines = 3,
         className,
       }: SkeletonProps & { lines?: number }) {
         return (
           <div className={cn('space-y-2', className)}>
             {Array.from({ length: lines }).map((_, i) => (
               <Skeleton
                 key={i}
                 className={cn('h-3', i === lines - 1 ? 'w-2/3' : 'w-full')}
               />
             ))}
           </div>
         );
       }

       export function PipelineSkeleton() {
         return (
           <div className="space-y-6">
             {/* Stage indicator skeleton */}
             <div className="flex justify-center gap-2">
               {Array.from({ length: 5 }).map((_, i) => (
                 <div key={i} className="flex items-center gap-1">
                   <Skeleton className="h-9 w-9 rounded-full" />
                   {i < 4 && <Skeleton className="h-0.5 w-8" />}
                 </div>
               ))}
             </div>

             {/* Agent cards skeleton */}
             <div className="space-y-4">
               <div className="flex justify-center">
                 <div className="w-full max-w-md">
                   <CardSkeleton />
                 </div>
               </div>
               <div className="grid grid-cols-2 gap-4 max-w-2xl mx-auto">
                 <CardSkeleton />
                 <CardSkeleton />
               </div>
               <div className="flex justify-center">
                 <div className="w-full max-w-md">
                   <CardSkeleton />
                 </div>
               </div>
               <div className="flex justify-center">
                 <div className="w-full max-w-md">
                   <CardSkeleton />
                 </div>
               </div>
             </div>
           </div>
         );
       }
       ```

    3. Update `src/app/globals.css` — READ first, then refine global styles for professional appearance.

       Add or update these styles (merge with existing content, do not replace Tailwind directives):

       ```css
       /* === Dashboard Global Styles === */

       /* Refined scrollbar for the dashboard */
       ::-webkit-scrollbar {
         width: 6px;
         height: 6px;
       }

       ::-webkit-scrollbar-track {
         background: transparent;
       }

       ::-webkit-scrollbar-thumb {
         background: #cbd5e1; /* slate-300 */
         border-radius: 3px;
       }

       ::-webkit-scrollbar-thumb:hover {
         background: #94a3b8; /* slate-400 */
       }

       /* Smooth transitions for all interactive elements */
       button, a, [role="button"] {
         transition: all 150ms ease;
       }

       /* Remove focus outline noise, use ring instead */
       *:focus-visible {
         outline: none;
         ring: 2px;
         ring-color: #3b82f6; /* blue-500 */
         ring-offset: 2px;
       }

       /* Professional table styling */
       table {
         border-collapse: separate;
         border-spacing: 0;
       }

       /* Card hover states for interactive cards */
       .card-interactive {
         transition: all 200ms ease;
       }

       .card-interactive:hover {
         transform: translateY(-1px);
         box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
       }

       /* Fade-in utility for non-framer-motion contexts */
       .fade-in {
         animation: fadeIn 300ms ease-out forwards;
       }

       @keyframes fadeIn {
         from { opacity: 0; transform: translateY(4px); }
         to { opacity: 1; transform: translateY(0); }
       }

       /* Status color utilities */
       .text-status-success { color: #10b981; }
       .text-status-warning { color: #f59e0b; }
       .text-status-error { color: #ef4444; }
       .text-status-info { color: #3b82f6; }
       .bg-status-success { background-color: #10b981; }
       .bg-status-warning { background-color: #f59e0b; }
       .bg-status-error { background-color: #ef4444; }
       .bg-status-info { background-color: #3b82f6; }
       ```

       IMPORTANT: These styles should COMPLEMENT shadcn/ui defaults, not override them. Keep all existing `@tailwind` directives and shadcn CSS variables intact.

       The key visual principles:
       - **Slate palette** for neutral UI (slate-50 background, slate-900 text, slate-200 borders)
       - **Emerald** for success/complete/online states
       - **Blue** for active/running/info states
       - **Red** for error/failed/critical states
       - **Amber** for warning/degraded/medium-risk states
       - **Subtle shadows** not heavy ones (shadow-sm, shadow-md max)
       - **Thin borders** (1px border-slate-200) not thick ones
       - **Rounded corners** (rounded-lg for cards, rounded-full for avatars/badges)
       - **Inter font** for all text (already set up in layout.tsx from Phase 1)
  </action>
  <verify>
    - `npx tsc --noEmit` passes for all new component files
    - StatusDot renders with correct colors for all 7 status values
    - StatusDot auto-pulses for 'running' and 'online' statuses
    - CardSkeleton renders a card-shaped skeleton loader with shimmer animation
    - PipelineSkeleton renders the full pipeline layout as skeleton placeholders
    - `npm run dev` shows refined scrollbars, smooth transitions, and consistent colors
    - Global CSS does not break existing shadcn/ui component styles
    - Dashboard layout shows header, sidebar, and content area with proper spacing
  </verify>
  <done>
    StatusDot provides color-coded animated indicators for all system and agent states. Loading skeletons cover cards, tables, text blocks, and the full pipeline layout. Global CSS refined with professional scrollbars, smooth transitions, focus rings, and status color utilities. Dashboard looks like real compliance software.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes for all 7 modified/created files
2. DashboardShell renders header (logo, status, avatar) + sidebar (nav, agent health) + content area
3. Sidebar navigation links highlight the active route
4. StatusDot renders animated green dots for online/completed, blue for running, red for failed
5. CardSkeleton and PipelineSkeleton render proper shimmer loading states
6. Global CSS adds refined scrollbars, smooth transitions, and status color utilities
7. `npm run dev` at localhost:3000 shows a professional dashboard layout
8. Color scheme is consistent: slate neutral, emerald success, blue active, red error, amber warning
9. No broken shadcn/ui styles after global CSS changes
10. Layout has fixed sidebar (w-56), sticky header (h-14), and properly offset content (ml-56 pt-14)
</verification>

<success_criteria>
- Professional, polished UI that looks like a real compliance platform, not a prototype (Phase 7 Success Criterion #4)
- Consistent color scheme and typography throughout the dashboard (DASH-06)
- Loading states use skeleton placeholders, not spinners or blank screens
- Dashboard layout with header + sidebar is the professional chrome around all content
- Status indicators (StatusDot) are reusable across the entire application
</success_criteria>

<output>
After completion, create `.planning/phases/07-agent-visualization/07-04-SUMMARY.md`
</output>
