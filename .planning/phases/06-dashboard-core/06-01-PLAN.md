---
phase: 06-dashboard-core
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/dashboard/layout.tsx
  - src/app/dashboard/page.tsx
  - src/components/layout/sidebar.tsx
  - src/components/layout/header.tsx
  - src/components/layout/dashboard-shell.tsx
  - src/lib/constants.ts
autonomous: true

must_haves:
  truths:
    - "Dashboard has a persistent sidebar navigation with links to Cases and overview"
    - "Dashboard has a top header bar showing app title and officer context"
    - "Navigating to /dashboard renders the layout with sidebar and header"
    - "Dashboard shell provides consistent page structure for all sub-pages"
    - "Active navigation item is visually highlighted based on current route"
  artifacts:
    - path: "src/app/dashboard/layout.tsx"
      provides: "Dashboard root layout with sidebar and header"
      contains: "DashboardLayout"
    - path: "src/components/layout/sidebar.tsx"
      provides: "Navigation sidebar with case queue link and branding"
      exports: ["Sidebar"]
    - path: "src/components/layout/header.tsx"
      provides: "Top header bar with title and officer badge"
      exports: ["Header"]
    - path: "src/components/layout/dashboard-shell.tsx"
      provides: "Reusable page shell wrapper with title, description, and content area"
      exports: ["DashboardShell"]
    - path: "src/lib/constants.ts"
      provides: "Navigation items, status colors, risk level colors shared across dashboard"
      exports: ["NAV_ITEMS", "STATUS_CONFIG", "RISK_LEVEL_CONFIG"]
  key_links:
    - from: "src/app/dashboard/layout.tsx"
      to: "src/components/layout/sidebar.tsx"
      via: "renders Sidebar component"
      pattern: "import.*Sidebar.*from"
    - from: "src/app/dashboard/layout.tsx"
      to: "src/components/layout/header.tsx"
      via: "renders Header component"
      pattern: "import.*Header.*from"
    - from: "src/components/layout/sidebar.tsx"
      to: "src/lib/constants.ts"
      via: "imports NAV_ITEMS for navigation links"
      pattern: "import.*NAV_ITEMS.*from"
---

<objective>
Build the dashboard layout shell — sidebar navigation, top header, and reusable page structure components. This establishes the visual frame that all dashboard sub-pages (case queue, case detail, etc.) render within.

Purpose: Every dashboard page needs consistent navigation, branding, and layout. Building the shell first means Plans 02-04 just drop content into the shell without worrying about layout. This also establishes the shared constants (status colors, risk level colors) used across all dashboard components.

Output: Dashboard layout at /dashboard with sidebar, header, and a reusable DashboardShell wrapper. Shared constants for status/risk display.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/types/index.ts (CaseStatus, RiskLevel, DecisionType)
@src/app/layout.tsx (root layout with Inter font)
@src/lib/utils.ts (cn utility)
@src/components/ui/button.tsx (shadcn Button)
@src/components/ui/badge.tsx (shadcn Badge)
@src/components/ui/separator.tsx (shadcn Separator)
@src/components/ui/scroll-area.tsx (shadcn ScrollArea)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create shared dashboard constants and configuration</name>
  <files>src/lib/constants.ts</files>
  <action>
    Create `src/lib/constants.ts` with shared configuration used across all dashboard components.

    ```typescript
    import { CaseStatus, RiskLevel, DecisionType } from '@/types';

    // Navigation items for the sidebar
    export const NAV_ITEMS = [
      {
        label: 'Overview',
        href: '/dashboard',
        icon: 'LayoutDashboard',  // lucide-react icon name
        description: 'Dashboard overview',
      },
      {
        label: 'Case Queue',
        href: '/dashboard/cases',
        icon: 'FileStack',
        description: 'Review pending cases',
      },
    ] as const;

    // Status display configuration — maps CaseStatus to visual properties
    export const STATUS_CONFIG: Record<CaseStatus, {
      label: string;
      variant: 'default' | 'secondary' | 'destructive' | 'outline';
      className: string;
    }> = {
      pending: {
        label: 'Pending',
        variant: 'secondary',
        className: 'bg-slate-100 text-slate-700 border-slate-200',
      },
      processing: {
        label: 'Processing',
        variant: 'secondary',
        className: 'bg-blue-100 text-blue-700 border-blue-200',
      },
      review: {
        label: 'Ready for Review',
        variant: 'default',
        className: 'bg-amber-100 text-amber-800 border-amber-200',
      },
      approved: {
        label: 'Approved',
        variant: 'default',
        className: 'bg-emerald-100 text-emerald-700 border-emerald-200',
      },
      denied: {
        label: 'Denied',
        variant: 'destructive',
        className: 'bg-red-100 text-red-700 border-red-200',
      },
      escalated: {
        label: 'Escalated',
        variant: 'default',
        className: 'bg-purple-100 text-purple-700 border-purple-200',
      },
    };

    // Risk level display configuration
    export const RISK_LEVEL_CONFIG: Record<RiskLevel, {
      label: string;
      className: string;
      dotColor: string;
    }> = {
      low: {
        label: 'Low Risk',
        className: 'bg-emerald-100 text-emerald-700 border-emerald-200',
        dotColor: 'bg-emerald-500',
      },
      medium: {
        label: 'Medium Risk',
        className: 'bg-amber-100 text-amber-700 border-amber-200',
        dotColor: 'bg-amber-500',
      },
      high: {
        label: 'High Risk',
        className: 'bg-orange-100 text-orange-700 border-orange-200',
        dotColor: 'bg-orange-500',
      },
      critical: {
        label: 'Critical Risk',
        className: 'bg-red-100 text-red-700 border-red-200',
        dotColor: 'bg-red-500',
      },
    };

    // Decision type display
    export const DECISION_CONFIG: Record<DecisionType, {
      label: string;
      className: string;
      icon: string;
    }> = {
      approved: {
        label: 'Approved',
        className: 'bg-emerald-100 text-emerald-700',
        icon: 'CheckCircle2',
      },
      denied: {
        label: 'Denied',
        className: 'bg-red-100 text-red-700',
        icon: 'XCircle',
      },
      escalated: {
        label: 'Escalated',
        className: 'bg-purple-100 text-purple-700',
        icon: 'AlertTriangle',
      },
    };
    ```

    This centralizes all visual configuration so that status badges, risk indicators, and decision labels are consistent across every dashboard component. No magic strings scattered through UI code.
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - NAV_ITEMS has entries for Overview and Case Queue with href paths
    - STATUS_CONFIG covers all 6 CaseStatus values
    - RISK_LEVEL_CONFIG covers all 4 RiskLevel values
    - DECISION_CONFIG covers all 3 DecisionType values
  </verify>
  <done>Shared dashboard constants created. Status colors, risk level indicators, decision labels, and nav items centralized for consistent display across all dashboard components.</done>
</task>

<task type="auto">
  <name>Task 2: Create dashboard layout with sidebar, header, and shell components</name>
  <files>src/components/layout/sidebar.tsx, src/components/layout/header.tsx, src/components/layout/dashboard-shell.tsx, src/app/dashboard/layout.tsx, src/app/dashboard/page.tsx</files>
  <action>
    **Create `src/components/layout/sidebar.tsx`:**

    ```typescript
    'use client';

    import Link from 'next/link';
    import { usePathname } from 'next/navigation';
    import { cn } from '@/lib/utils';
    import { NAV_ITEMS } from '@/lib/constants';
    import { Button } from '@/components/ui/button';
    import { ScrollArea } from '@/components/ui/scroll-area';
    import { Separator } from '@/components/ui/separator';
    import { LayoutDashboard, FileStack, Shield } from 'lucide-react';

    // Map icon names to components
    const ICON_MAP: Record<string, React.ComponentType<{ className?: string }>> = {
      LayoutDashboard,
      FileStack,
    };

    export function Sidebar() {
      const pathname = usePathname();

      return (
        <aside className="flex h-full w-64 flex-col border-r bg-card">
          {/* Branding */}
          <div className="flex h-14 items-center gap-2 border-b px-4">
            <Shield className="h-5 w-5 text-primary" />
            <span className="font-semibold text-sm">KYC/AML Orchestrator</span>
          </div>

          {/* Navigation */}
          <ScrollArea className="flex-1 px-3 py-4">
            <nav className="flex flex-col gap-1">
              {NAV_ITEMS.map((item) => {
                const Icon = ICON_MAP[item.icon];
                const isActive = item.href === '/dashboard'
                  ? pathname === '/dashboard'
                  : pathname.startsWith(item.href);

                return (
                  <Link key={item.href} href={item.href}>
                    <Button
                      variant={isActive ? 'secondary' : 'ghost'}
                      className={cn(
                        'w-full justify-start gap-2',
                        isActive && 'bg-secondary font-medium'
                      )}
                    >
                      {Icon && <Icon className="h-4 w-4" />}
                      {item.label}
                    </Button>
                  </Link>
                );
              })}
            </nav>
          </ScrollArea>

          {/* Footer */}
          <Separator />
          <div className="p-4">
            <p className="text-xs text-muted-foreground">
              Compliance Dashboard v0.1
            </p>
          </div>
        </aside>
      );
    }
    ```

    **Create `src/components/layout/header.tsx`:**

    ```typescript
    import { Badge } from '@/components/ui/badge';
    import { Shield } from 'lucide-react';

    export function Header() {
      return (
        <header className="flex h-14 items-center justify-between border-b bg-card px-6">
          <div className="flex items-center gap-3">
            <h1 className="text-sm font-semibold text-foreground">
              Compliance Dashboard
            </h1>
          </div>
          <div className="flex items-center gap-3">
            <Badge variant="outline" className="gap-1.5">
              <div className="h-2 w-2 rounded-full bg-emerald-500" />
              System Online
            </Badge>
            <Badge variant="secondary" className="gap-1.5">
              <Shield className="h-3 w-3" />
              Compliance Officer
            </Badge>
          </div>
        </header>
      );
    }
    ```

    **Create `src/components/layout/dashboard-shell.tsx`:**

    A reusable wrapper that provides consistent page structure — title, optional description, and content area. Every dashboard sub-page wraps its content in this shell.

    ```typescript
    import { cn } from '@/lib/utils';

    interface DashboardShellProps {
      title: string;
      description?: string;
      children: React.ReactNode;
      className?: string;
      actions?: React.ReactNode;  // Optional right-aligned action buttons
    }

    export function DashboardShell({
      title,
      description,
      children,
      className,
      actions,
    }: DashboardShellProps) {
      return (
        <div className={cn('flex flex-1 flex-col gap-6 p-6', className)}>
          <div className="flex items-center justify-between">
            <div>
              <h2 className="text-2xl font-bold tracking-tight">{title}</h2>
              {description && (
                <p className="text-sm text-muted-foreground mt-1">{description}</p>
              )}
            </div>
            {actions && <div className="flex items-center gap-2">{actions}</div>}
          </div>
          {children}
        </div>
      );
    }
    ```

    **Create `src/app/dashboard/layout.tsx`:**

    Dashboard layout that wraps all /dashboard/* pages with sidebar and header.

    ```typescript
    import { Sidebar } from '@/components/layout/sidebar';
    import { Header } from '@/components/layout/header';

    export default function DashboardLayout({
      children,
    }: {
      children: React.ReactNode;
    }) {
      return (
        <div className="flex h-screen overflow-hidden">
          <Sidebar />
          <div className="flex flex-1 flex-col overflow-hidden">
            <Header />
            <main className="flex-1 overflow-y-auto bg-muted/30">
              {children}
            </main>
          </div>
        </div>
      );
    }
    ```

    **Create `src/app/dashboard/page.tsx`:**

    Overview page — a simple stats dashboard that will be enhanced later. For now, shows placeholder cards that prove the layout works.

    ```typescript
    import { DashboardShell } from '@/components/layout/dashboard-shell';
    import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
    import { FileStack, Clock, CheckCircle2, AlertTriangle } from 'lucide-react';

    export default function DashboardOverview() {
      return (
        <DashboardShell
          title="Overview"
          description="KYC/AML case processing dashboard"
        >
          <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            <StatsCard
              title="Total Cases"
              value="--"
              description="All cases in system"
              icon={<FileStack className="h-4 w-4 text-muted-foreground" />}
            />
            <StatsCard
              title="Pending Review"
              value="--"
              description="Awaiting officer decision"
              icon={<Clock className="h-4 w-4 text-amber-500" />}
            />
            <StatsCard
              title="Approved"
              value="--"
              description="Cases approved"
              icon={<CheckCircle2 className="h-4 w-4 text-emerald-500" />}
            />
            <StatsCard
              title="Escalated"
              value="--"
              description="Cases requiring escalation"
              icon={<AlertTriangle className="h-4 w-4 text-purple-500" />}
            />
          </div>

          <Card>
            <CardHeader>
              <CardTitle>Welcome to the Compliance Dashboard</CardTitle>
              <CardDescription>
                Navigate to the Case Queue to review pending KYC/AML cases. Each case includes
                AI-generated risk assessments, identity verification results, and sanctions screening reports.
              </CardDescription>
            </CardHeader>
          </Card>
        </DashboardShell>
      );
    }

    function StatsCard({
      title,
      value,
      description,
      icon,
    }: {
      title: string;
      value: string;
      description: string;
      icon: React.ReactNode;
    }) {
      return (
        <Card>
          <CardHeader className="flex flex-row items-center justify-between pb-2">
            <CardTitle className="text-sm font-medium">{title}</CardTitle>
            {icon}
          </CardHeader>
          <CardContent>
            <div className="text-2xl font-bold">{value}</div>
            <p className="text-xs text-muted-foreground">{description}</p>
          </CardContent>
        </Card>
      );
    }
    ```

    Also update `src/app/page.tsx` to redirect to the dashboard:
    - Add a "Go to Dashboard" button/link that navigates to `/dashboard`
    - Or use `redirect('/dashboard')` from `next/navigation` to auto-redirect

    IMPORTANT: Use `'use client'` directive only where needed (Sidebar uses `usePathname`). Header and DashboardShell are server components — no client directives needed.
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `npm run dev` starts and navigating to localhost:3000/dashboard shows the layout with sidebar and header
    - Sidebar shows "KYC/AML Orchestrator" branding and navigation links
    - Header shows "Compliance Dashboard" title and "System Online" / "Compliance Officer" badges
    - Overview page renders with 4 stats cards and welcome message
    - Clicking "Case Queue" in sidebar navigates to /dashboard/cases (will be 404 for now — that's Plan 02)
    - Active nav item is highlighted (Overview when on /dashboard)
  </verify>
  <done>Dashboard layout shell complete. Sidebar with navigation, header with officer context, DashboardShell wrapper for consistent page structure. All dashboard sub-pages will render within this frame. Overview page proves the layout works.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes for all new files
2. `npm run dev` starts and /dashboard shows full layout
3. Sidebar renders with navigation links and branding
4. Header renders with status badges
5. Overview page shows 4 stats cards in grid layout
6. Active nav highlighting works on /dashboard
7. DashboardShell component accepts title, description, actions, and children
8. STATUS_CONFIG, RISK_LEVEL_CONFIG, DECISION_CONFIG cover all enum values
</verification>

<success_criteria>
- Dashboard layout provides consistent frame for all sub-pages
- Sidebar navigation links to Case Queue (DASH-01 will live there)
- Shared constants centralize all status/risk display configuration
- Professional, polished look matching a real compliance platform
- Layout is ready for Plans 02-04 to add case queue, detail view, and decision workflow
</success_criteria>

<output>
After completion, create `.planning/phases/06-dashboard-core/06-01-SUMMARY.md`
</output>
